{
 "Resources": {
  "CreateWaitlistFunctionServiceRoleA7FED171": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateWaitlistFunction/ServiceRole/Resource"
   }
  },
  "CreateWaitlistFunctionServiceRoleDefaultPolicyB5F3830F": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:PutItem",
        "dynamodb:GetItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
       }
      },
      {
       "Action": [
        "s3:PutObject",
        "s3:PutObjectAcl"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttAssetsBucket5CB76180ArnBF60D959"
          },
          "/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateWaitlistFunctionServiceRoleDefaultPolicyB5F3830F",
    "Roles": [
     {
      "Ref": "CreateWaitlistFunctionServiceRoleA7FED171"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateWaitlistFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateWaitlistFunction591E25D1": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "d701062f53ad191dc293d76c56fff1f423f0a9d02936d4c7d6c7126a468a05e8.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefWaitlistTable9B05A3ACC671715E"
      },
      "ASSETS_BUCKET": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefAssetsBucket5CB761808BF2E271"
      },
      "JWT_SECRET": "your-jwt-secret-key-change-in-production"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CreateWaitlistFunctionServiceRoleA7FED171",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "CreateWaitlistFunctionServiceRoleDefaultPolicyB5F3830F",
    "CreateWaitlistFunctionServiceRoleA7FED171"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateWaitlistFunction/Resource",
    "aws:asset:path": "asset.d701062f53ad191dc293d76c56fff1f423f0a9d02936d4c7d6c7126a468a05e8",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListWaitlistsFunctionServiceRoleAE3D1238": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ListWaitlistsFunction/ServiceRole/Resource"
   }
  },
  "ListWaitlistsFunctionServiceRoleDefaultPolicy090F67D4": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:GetObject",
        "s3:ListBucket"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttAssetsBucket5CB76180ArnBF60D959"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttAssetsBucket5CB76180ArnBF60D959"
           },
           "/*"
          ]
         ]
        }
       ]
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListWaitlistsFunctionServiceRoleDefaultPolicy090F67D4",
    "Roles": [
     {
      "Ref": "ListWaitlistsFunctionServiceRoleAE3D1238"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ListWaitlistsFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ListWaitlistsFunction675C0399": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "ad30226e8a63677b8d91509ece9494124130951699ad0a6e2e86a8289184034b.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefWaitlistTable9B05A3ACC671715E"
      },
      "ASSETS_BUCKET": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefAssetsBucket5CB761808BF2E271"
      },
      "JWT_SECRET": "your-jwt-secret-key-change-in-production"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ListWaitlistsFunctionServiceRoleAE3D1238",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "ListWaitlistsFunctionServiceRoleDefaultPolicy090F67D4",
    "ListWaitlistsFunctionServiceRoleAE3D1238"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ListWaitlistsFunction/Resource",
    "aws:asset:path": "asset.ad30226e8a63677b8d91509ece9494124130951699ad0a6e2e86a8289184034b",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateSubscriberFunctionServiceRole50E5B4E3": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateSubscriberFunction/ServiceRole/Resource"
   }
  },
  "CreateSubscriberFunctionServiceRoleDefaultPolicy4AA55DB8": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:PutItem",
        "dynamodb:GetItem",
        "dynamodb:UpdateItem",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
       }
      },
      {
       "Action": [
        "s3:PutObject",
        "s3:GetObject"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttAssetsBucket5CB76180ArnBF60D959"
          },
          "/exports/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateSubscriberFunctionServiceRoleDefaultPolicy4AA55DB8",
    "Roles": [
     {
      "Ref": "CreateSubscriberFunctionServiceRole50E5B4E3"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateSubscriberFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateSubscriberFunction48704A6B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "a211cacc09b6c9b4d39ee5d143ef51616b3b4795c97c036a44cab5fc4556bd01.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefWaitlistTable9B05A3ACC671715E"
      },
      "ASSETS_BUCKET": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefAssetsBucket5CB761808BF2E271"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CreateSubscriberFunctionServiceRole50E5B4E3",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "CreateSubscriberFunctionServiceRoleDefaultPolicy4AA55DB8",
    "CreateSubscriberFunctionServiceRole50E5B4E3"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateSubscriberFunction/Resource",
    "aws:asset:path": "asset.a211cacc09b6c9b4d39ee5d143ef51616b3b4795c97c036a44cab5fc4556bd01",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ListSubscribersFunctionServiceRole2395C2AA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ListSubscribersFunction/ServiceRole/Resource"
   }
  },
  "ListSubscribersFunctionServiceRoleDefaultPolicyF86F7107": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:Query",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": "s3:GetObject",
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttAssetsBucket5CB76180ArnBF60D959"
          },
          "/exports/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ListSubscribersFunctionServiceRoleDefaultPolicyF86F7107",
    "Roles": [
     {
      "Ref": "ListSubscribersFunctionServiceRole2395C2AA"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ListSubscribersFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ListSubscribersFunctionC4A3CB54": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "9361a02f5cb1150e0c20f65432a0bba461a471574be65e418569ff4696c26eaa.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefWaitlistTable9B05A3ACC671715E"
      },
      "ASSETS_BUCKET": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefAssetsBucket5CB761808BF2E271"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ListSubscribersFunctionServiceRole2395C2AA",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "ListSubscribersFunctionServiceRoleDefaultPolicyF86F7107",
    "ListSubscribersFunctionServiceRole2395C2AA"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ListSubscribersFunction/Resource",
    "aws:asset:path": "asset.9361a02f5cb1150e0c20f65432a0bba461a471574be65e418569ff4696c26eaa",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ExportSubscribersFunctionServiceRoleB233192A": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ExportSubscribersFunction/ServiceRole/Resource"
   }
  },
  "ExportSubscribersFunctionServiceRoleDefaultPolicyC57A78FC": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "dynamodb:Query",
       "Effect": "Allow",
       "Resource": [
        {
         "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
        },
        {
         "Fn::Join": [
          "",
          [
           {
            "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
           },
           "/index/*"
          ]
         ]
        }
       ]
      },
      {
       "Action": [
        "s3:PutObject",
        "s3:GetObject"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::Join": [
         "",
         [
          {
           "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttAssetsBucket5CB76180ArnBF60D959"
          },
          "/exports/*"
         ]
        ]
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ExportSubscribersFunctionServiceRoleDefaultPolicyC57A78FC",
    "Roles": [
     {
      "Ref": "ExportSubscribersFunctionServiceRoleB233192A"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ExportSubscribersFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ExportSubscribersFunction0385D2AC": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "3adaf6378b55bc3ad624097bb12a7f64f9d803c3db6856704bbedf0e87d69f96.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefWaitlistTable9B05A3ACC671715E"
      },
      "ASSETS_BUCKET": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefAssetsBucket5CB761808BF2E271"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ExportSubscribersFunctionServiceRoleB233192A",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "ExportSubscribersFunctionServiceRoleDefaultPolicyC57A78FC",
    "ExportSubscribersFunctionServiceRoleB233192A"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ExportSubscribersFunction/Resource",
    "aws:asset:path": "asset.3adaf6378b55bc3ad624097bb12a7f64f9d803c3db6856704bbedf0e87d69f96",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CreateApiKeyFunctionServiceRoleE1D191C5": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateApiKeyFunction/ServiceRole/Resource"
   }
  },
  "CreateApiKeyFunctionServiceRoleDefaultPolicy207707F1": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:PutItem",
        "dynamodb:GetItem"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CreateApiKeyFunctionServiceRoleDefaultPolicy207707F1",
    "Roles": [
     {
      "Ref": "CreateApiKeyFunctionServiceRoleE1D191C5"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateApiKeyFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CreateApiKeyFunction8C80250B": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "0fcc49ae6a6ed2dceb3569651e977f69c01e24dbfeee4fe85ffa35f7371ffea3.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefWaitlistTable9B05A3ACC671715E"
      },
      "ASSETS_BUCKET": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefAssetsBucket5CB761808BF2E271"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CreateApiKeyFunctionServiceRoleE1D191C5",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "CreateApiKeyFunctionServiceRoleDefaultPolicy207707F1",
    "CreateApiKeyFunctionServiceRoleE1D191C5"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CreateApiKeyFunction/Resource",
    "aws:asset:path": "asset.0fcc49ae6a6ed2dceb3569651e977f69c01e24dbfeee4fe85ffa35f7371ffea3",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "ValidateApiKeyFunctionServiceRoleC3A10C24": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ValidateApiKeyFunction/ServiceRole/Resource"
   }
  },
  "ValidateApiKeyFunctionServiceRoleDefaultPolicyB99D2862": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": [
        "dynamodb:GetItem",
        "dynamodb:UpdateItem",
        "dynamodb:Scan"
       ],
       "Effect": "Allow",
       "Resource": {
        "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputFnGetAttWaitlistTable9B05A3ACArn60C9593A"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "ValidateApiKeyFunctionServiceRoleDefaultPolicyB99D2862",
    "Roles": [
     {
      "Ref": "ValidateApiKeyFunctionServiceRoleC3A10C24"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ValidateApiKeyFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "ValidateApiKeyFunction498983D2": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "bcd73bb6e2caf6f3bd64b797f290bc8c8ee633bb7c847061c3929bb07a186d76.zip"
    },
    "Environment": {
     "Variables": {
      "TABLE_NAME": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefWaitlistTable9B05A3ACC671715E"
      },
      "ASSETS_BUCKET": {
       "Fn::ImportValue": "WaitlistStorageStack:ExportsOutputRefAssetsBucket5CB761808BF2E271"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "ValidateApiKeyFunctionServiceRoleC3A10C24",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "ValidateApiKeyFunctionServiceRoleDefaultPolicyB99D2862",
    "ValidateApiKeyFunctionServiceRoleC3A10C24"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/ValidateApiKeyFunction/Resource",
    "aws:asset:path": "asset.bcd73bb6e2caf6f3bd64b797f290bc8c8ee633bb7c847061c3929bb07a186d76",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "LoginFunctionServiceRole74B42ABA": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/LoginFunction/ServiceRole/Resource"
   }
  },
  "LoginFunction66F090C6": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "0c23b634cdb612f071bfa55c81295476cb8f4aaf60400fa5ea02bedd2b7fa33e.zip"
    },
    "Environment": {
     "Variables": {
      "ADMIN_EMAIL": "admin@waitlist.com",
      "ADMIN_PASSWORD_HASH": "240be518fabd2724ddb6f04eeb1da5967448d7e831c08c8fa822809f74c720a9",
      "JWT_SECRET": "your-jwt-secret-key-change-in-production"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "LoginFunctionServiceRole74B42ABA",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "LoginFunctionServiceRole74B42ABA"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/LoginFunction/Resource",
    "aws:asset:path": "asset.0c23b634cdb612f071bfa55c81295476cb8f4aaf60400fa5ea02bedd2b7fa33e",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "VerifyTokenFunctionServiceRoleE7660C7E": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/VerifyTokenFunction/ServiceRole/Resource"
   }
  },
  "VerifyTokenFunction8FAF0F05": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "efc4c8342aeb06d308b19d16060d02399ba15c7cc76e4ed8d5c9a7b68779f849.zip"
    },
    "Environment": {
     "Variables": {
      "JWT_SECRET": "your-jwt-secret-key-change-in-production"
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "VerifyTokenFunctionServiceRoleE7660C7E",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "VerifyTokenFunctionServiceRoleE7660C7E"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/VerifyTokenFunction/Resource",
    "aws:asset:path": "asset.efc4c8342aeb06d308b19d16060d02399ba15c7cc76e4ed8d5c9a7b68779f849",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CognitoLoginFunctionServiceRoleC1E43119": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CognitoLoginFunction/ServiceRole/Resource"
   }
  },
  "CognitoLoginFunctionServiceRoleDefaultPolicyA5FDFCAB": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "cognito-idp:InitiateAuth",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CognitoLoginFunctionServiceRoleDefaultPolicyA5FDFCAB",
    "Roles": [
     {
      "Ref": "CognitoLoginFunctionServiceRoleC1E43119"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CognitoLoginFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CognitoLoginFunction7FB08061": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "37af16ed5c1ba9b6bfb4b04556374fddf1f07951ea5ef7e0e9ba91e04f61fc91.zip"
    },
    "Environment": {
     "Variables": {
      "COGNITO_USER_POOL_ID": {
       "Fn::ImportValue": "WaitlistCognitoStack:ExportsOutputRefWaitlistUserPool659366D6164C46F5"
      },
      "COGNITO_CLIENT_ID": {
       "Fn::ImportValue": "WaitlistCognitoStack:ExportsOutputRefWaitlistUserPoolClient3A9EAF6FBBC1D941"
      }
     }
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CognitoLoginFunctionServiceRoleC1E43119",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "CognitoLoginFunctionServiceRoleDefaultPolicyA5FDFCAB",
    "CognitoLoginFunctionServiceRoleC1E43119"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CognitoLoginFunction/Resource",
    "aws:asset:path": "asset.37af16ed5c1ba9b6bfb4b04556374fddf1f07951ea5ef7e0e9ba91e04f61fc91",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CognitoVerifyFunctionServiceRoleBD3217DD": {
   "Type": "AWS::IAM::Role",
   "Properties": {
    "AssumeRolePolicyDocument": {
     "Statement": [
      {
       "Action": "sts:AssumeRole",
       "Effect": "Allow",
       "Principal": {
        "Service": "lambda.amazonaws.com"
       }
      }
     ],
     "Version": "2012-10-17"
    },
    "ManagedPolicyArns": [
     {
      "Fn::Join": [
       "",
       [
        "arn:",
        {
         "Ref": "AWS::Partition"
        },
        ":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"
       ]
      ]
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CognitoVerifyFunction/ServiceRole/Resource"
   }
  },
  "CognitoVerifyFunctionServiceRoleDefaultPolicyD04024A7": {
   "Type": "AWS::IAM::Policy",
   "Properties": {
    "PolicyDocument": {
     "Statement": [
      {
       "Action": "cognito-idp:GetUser",
       "Effect": "Allow",
       "Resource": "*"
      }
     ],
     "Version": "2012-10-17"
    },
    "PolicyName": "CognitoVerifyFunctionServiceRoleDefaultPolicyD04024A7",
    "Roles": [
     {
      "Ref": "CognitoVerifyFunctionServiceRoleBD3217DD"
     }
    ]
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CognitoVerifyFunction/ServiceRole/DefaultPolicy/Resource"
   }
  },
  "CognitoVerifyFunction2E317731": {
   "Type": "AWS::Lambda::Function",
   "Properties": {
    "Code": {
     "S3Bucket": "cdk-hnb659fds-assets-653268860643-us-east-1",
     "S3Key": "fa154e5fd09ef1247347fe16d80514176351cc4d5b7d276b3807459149535dcd.zip"
    },
    "Handler": "index.handler",
    "Role": {
     "Fn::GetAtt": [
      "CognitoVerifyFunctionServiceRoleBD3217DD",
      "Arn"
     ]
    },
    "Runtime": "nodejs20.x"
   },
   "DependsOn": [
    "CognitoVerifyFunctionServiceRoleDefaultPolicyD04024A7",
    "CognitoVerifyFunctionServiceRoleBD3217DD"
   ],
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CognitoVerifyFunction/Resource",
    "aws:asset:path": "asset.fa154e5fd09ef1247347fe16d80514176351cc4d5b7d276b3807459149535dcd",
    "aws:asset:is-bundled": true,
    "aws:asset:property": "Code"
   }
  },
  "CDKMetadata": {
   "Type": "AWS::CDK::Metadata",
   "Properties": {
    "Analytics": "v2:deflate64:H4sIAAAAAAAA/zWOQQqDMBBFz9L9ONV4gip0WYoeQMYYZTQm4CSVIt69qHT1/l/8x1eoVIrpjVZJdDclllvc6kB6Alql2SzNbUeN850ZBV8nntHpwN4B04xb5a2Bsncn396y/h71SjtI3pCICYKPAyA5FlFPJhQkBi49lr37S3eojPi4aAPnoA40sBt2OC7gKPePUpjlmN1GYU6W6ALPBquLPwsPUmXPAAAA"
   },
   "Metadata": {
    "aws:cdk:path": "WaitlistComputeStack/CDKMetadata/Default"
   }
  }
 },
 "Outputs": {
  "ExportsOutputFnGetAttCreateWaitlistFunction591E25D1ArnA2E8CE4B": {
   "Value": {
    "Fn::GetAtt": [
     "CreateWaitlistFunction591E25D1",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttCreateWaitlistFunction591E25D1ArnA2E8CE4B"
   }
  },
  "ExportsOutputFnGetAttListWaitlistsFunction675C0399Arn2F630C38": {
   "Value": {
    "Fn::GetAtt": [
     "ListWaitlistsFunction675C0399",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttListWaitlistsFunction675C0399Arn2F630C38"
   }
  },
  "ExportsOutputFnGetAttCreateSubscriberFunction48704A6BArnA2B0141A": {
   "Value": {
    "Fn::GetAtt": [
     "CreateSubscriberFunction48704A6B",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttCreateSubscriberFunction48704A6BArnA2B0141A"
   }
  },
  "ExportsOutputFnGetAttListSubscribersFunctionC4A3CB54Arn9FF6AEC0": {
   "Value": {
    "Fn::GetAtt": [
     "ListSubscribersFunctionC4A3CB54",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttListSubscribersFunctionC4A3CB54Arn9FF6AEC0"
   }
  },
  "ExportsOutputFnGetAttExportSubscribersFunction0385D2ACArn4BC09B38": {
   "Value": {
    "Fn::GetAtt": [
     "ExportSubscribersFunction0385D2AC",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttExportSubscribersFunction0385D2ACArn4BC09B38"
   }
  },
  "ExportsOutputFnGetAttCreateApiKeyFunction8C80250BArn150DD7E4": {
   "Value": {
    "Fn::GetAtt": [
     "CreateApiKeyFunction8C80250B",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttCreateApiKeyFunction8C80250BArn150DD7E4"
   }
  },
  "ExportsOutputFnGetAttValidateApiKeyFunction498983D2ArnB4365DCE": {
   "Value": {
    "Fn::GetAtt": [
     "ValidateApiKeyFunction498983D2",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttValidateApiKeyFunction498983D2ArnB4365DCE"
   }
  },
  "ExportsOutputFnGetAttLoginFunction66F090C6Arn235F881E": {
   "Value": {
    "Fn::GetAtt": [
     "LoginFunction66F090C6",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttLoginFunction66F090C6Arn235F881E"
   }
  },
  "ExportsOutputFnGetAttVerifyTokenFunction8FAF0F05Arn803F466D": {
   "Value": {
    "Fn::GetAtt": [
     "VerifyTokenFunction8FAF0F05",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttVerifyTokenFunction8FAF0F05Arn803F466D"
   }
  },
  "ExportsOutputFnGetAttCognitoLoginFunction7FB08061Arn3BE5EC20": {
   "Value": {
    "Fn::GetAtt": [
     "CognitoLoginFunction7FB08061",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttCognitoLoginFunction7FB08061Arn3BE5EC20"
   }
  },
  "ExportsOutputFnGetAttCognitoVerifyFunction2E317731Arn40B75E33": {
   "Value": {
    "Fn::GetAtt": [
     "CognitoVerifyFunction2E317731",
     "Arn"
    ]
   },
   "Export": {
    "Name": "WaitlistComputeStack:ExportsOutputFnGetAttCognitoVerifyFunction2E317731Arn40B75E33"
   }
  }
 },
 "Parameters": {
  "BootstrapVersion": {
   "Type": "AWS::SSM::Parameter::Value<String>",
   "Default": "/cdk-bootstrap/hnb659fds/version",
   "Description": "Version of the CDK Bootstrap resources in this environment, automatically retrieved from SSM Parameter Store. [cdk:skip]"
  }
 },
 "Rules": {
  "CheckBootstrapVersion": {
   "Assertions": [
    {
     "Assert": {
      "Fn::Not": [
       {
        "Fn::Contains": [
         [
          "1",
          "2",
          "3",
          "4",
          "5"
         ],
         {
          "Ref": "BootstrapVersion"
         }
        ]
       }
      ]
     },
     "AssertDescription": "CDK bootstrap stack version 6 required. Please run 'cdk bootstrap' with a recent version of the CDK CLI."
    }
   ]
  }
 }
}